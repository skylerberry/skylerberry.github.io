<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stock Trading Calculator ‚Äî v2.0</title>
  <link rel="stylesheet" href="styles.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="brand">
        <div class="brand-mark">‚ÇÇ¬∑‚ÇÄ</div>
        <div>
          <h1 class="title">Stock Trading Calculator</h1>
          <p class="subtitle">Card-based, colorful, and fast ‚Äî same power, fresh look.</p>
        </div>
      </div>
      <div class="actions">
        <!-- Theme Toggle (kept id for ThemeManager) -->
        <label class="theme-toggle" for="theme-switch" title="Toggle dark mode">
          <input type="checkbox" id="theme-switch" aria-label="Toggle dark mode">
          <span class="toggle-track">
            <span class="toggle-indicator">
              <span class="toggle-icon light">‚òÄÔ∏è</span>
              <span class="toggle-icon dark">üåô</span>
            </span>
          </span>
        </label>
      </div>
    </header>

    <main class="app-main">
      <!-- CALCULATOR SECTION -->
      <section class="section" data-section="calculator">
        <div class="cards two-col">
          <!-- Account Information -->
          <article class="card card--teal">
            <header class="card__header">
              <h2 class="card__title">Account Information</h2>
              <span class="badge">Setup</span>
            </header>

            <div class="field">
              <label class="label" for="accountSize">Account Size ($)</label>
              <div class="input input--prefix">
                <span class="input__affix">$</span>
                <input type="text" id="accountSize" class="text-input" placeholder="e.g. 10,000 or 1.5m" required>
              </div>
              <p class="hint">You can use shorthand: <strong>10k</strong> = 10,000 or <strong>1.5m</strong> = 1,500,000</p>
            </div>

            <div class="field">
              <div class="row-between">
                <label class="label" for="riskPercentage">Risk per Trade (%)</label>
                <button type="button" id="quickScenariosButton" class="chip chip--ghost" aria-expanded="false">
                  <span id="quickScenariosIcon" class="chip__icon">üìä</span>
                  Risk Scenarios
                </button>
              </div>

              <div class="chip-group" role="group" aria-label="Quick risk amounts">
                <button type="button" class="chip risk-button" data-value="0.1">0.1%</button>
                <button type="button" class="chip risk-button" data-value="0.25">0.25%</button>
                <button type="button" class="chip risk-button" data-value="0.5">0.5%</button>
                <button type="button" class="chip risk-button" data-value="0.75">0.75%</button>
                <button type="button" class="chip risk-button active" data-value="1">1%</button>
              </div>

              <div class="input input--suffix">
                <input type="number" id="riskPercentage" class="number-input" value="1" min="0" max="100" step="0.05" required>
                <span class="input__affix">%</span>
              </div>
            </div>

            <div class="field">
              <label class="label" for="maxAccountPercentage">Max % of Account</label>
              <div class="chip-group" role="group" aria-label="Max allocation">
                <button type="button" class="chip max-account-button" data-value="10">10%</button>
                <button type="button" class="chip max-account-button" data-value="20">20%</button>
                <button type="button" class="chip max-account-button" data-value="50">50%</button>
                <button type="button" class="chip max-account-button" data-value="75">75%</button>
                <button type="button" class="chip max-account-button active" data-value="100">100%</button>
              </div>
              <div class="input input--suffix">
                <input type="number" id="maxAccountPercentage" class="number-input" value="100" min="0" max="100" step="1" required>
                <span class="input__affix">%</span>
              </div>
              <p class="hint">Caps the maximum position size as a percentage of your account.</p>
            </div>
          </article>

          <!-- Trade Details -->
          <article class="card card--purple">
            <header class="card__header">
              <h2 class="card__title">Trade Details</h2>
              <span class="badge badge--secondary">Inputs</span>
            </header>

            <div class="field">
              <label class="label" for="entryPrice">Entry Price ($)</label>
              <div class="input input--prefix">
                <span class="input__affix">$</span>
                <input type="text" id="entryPrice" class="text-input" placeholder="Enter entry price">
              </div>
            </div>

            <div class="field">
              <label class="label" for="stopLossPrice">Stop Loss Price ($)</label>
              <div class="input input--prefix">
                <span class="input__affix">$</span>
                <input type="text" id="stopLossPrice" class="text-input" placeholder="Enter stop loss price">
              </div>
              <p class="hint">Must be below entry price</p>
              <p id="stopLossError" class="error hidden"></p>
            </div>

            <div class="field">
              <label class="label" for="targetPrice">Target Price ($) ‚Äî Optional</label>
              <div class="input input--prefix">
                <span class="input__affix">$</span>
                <input type="text" id="targetPrice" class="text-input" placeholder="Enter target price (optional)">
              </div>
              <p class="hint">Should be above entry price</p>
              <p id="targetPriceError" class="error hidden"></p>
            </div>

            <div class="field field--compact">
              <button id="clearButton" type="button" class="btn btn--ghost">Clear Calculator</button>
            </div>
          </article>
        </div>

        <!-- RESULTS -->
        <article class="card card--lime">
          <header class="card__header">
            <h3 class="card__title">Results</h3>
            <span class="badge badge--success">Calculated</span>
          </header>

          <div class="results-grid">
            <div class="result-card">
              <div class="result-label">Shares to Purchase</div>
              <div class="result-value" id="sharesValue">-</div>
            </div>
            <div class="result-card">
              <div class="result-label">Position Size</div>
              <div class="result-value result-value--xl" id="positionSizeValue">-</div>
            </div>
            <div class="result-card">
              <div class="result-label">Stop Distance</div>
              <div class="result-value" id="stopDistanceValue">-</div>
            </div>
            <div class="result-card">
              <div class="result-label">Total Risk Amount</div>
              <div class="result-value" id="totalRiskValue">-</div>
            </div>
            <div class="result-card">
              <div class="result-label">% of Account</div>
              <div class="result-value" id="percentOfAccountValue">-</div>
            </div>
            <div class="result-card">
              <div class="result-label">R Multiple</div>
              <div class="result-value" id="rMultipleValue">- R</div>
            </div>
            <div class="result-card result-card--full">
              <div class="result-label">5R Target Price <span class="pill pill--trim">Trim Zone</span></div>
              <div class="result-value result-value--trim" id="fiveRTargetValue">-</div>
            </div>
          </div>

          <!-- Profit Section -->
          <div id="profitSection" class="profit-block hidden">
            <div class="profit-title">If Target is Hit</div>
            <div class="profit-grid">
              <div class="result-card">
                <div class="result-label">Profit Per Share</div>
                <div class="result-value result-value--profit" id="profitPerShareValue">-</div>
              </div>
              <div class="result-card">
                <div class="result-label">
                  Total Profit
                  <button type="button" id="addProfitButton" class="mini-btn" title="Add profit to account">‚ûï</button>
                </div>
                <div class="result-value result-value--profit" id="totalProfitValue">-</div>
              </div>
              <div class="result-card">
                <div class="result-label">Return on Investment</div>
                <div class="result-value result-value--profit" id="roiValue">-</div>
              </div>
              <div class="result-card">
                <div class="result-label">Risk:Reward Ratio</div>
                <div class="result-value result-value--profit" id="riskRewardValue">-</div>
              </div>
            </div>
          </div>
        </article>

        <!-- Expanders: Info & Scenarios -->
        <div class="cards one-col">
          <article class="expander">
            <button type="button" id="infoButton" class="expander__trigger" aria-expanded="false">
              <span id="infoIcon" class="expander__icon">+</span>
              How is position size calculated?
            </button>
            <div id="infoContent" class="expander__content hidden" role="region" aria-expanded="false">
              <div class="info__header">
                <h4 class="info__title">How it Works ‚Äî Example</h4>
              </div>
              <div class="info__body">
                <p class="scenario-intro">If you have a <strong>$10,000 account</strong> and want to risk <strong>1%</strong>:</p>
                <div class="calc-steps">
                  <div class="calc-step">
                    <span class="step-label">Your risk budget:</span>
                    <span class="step-value">$100</span>
                  </div>
                  <div class="calc-step">
                    <span class="step-label">Stock price: $50, Stop loss: $48</span>
                    <span class="step-value">(risking $2 per share)</span>
                  </div>
                  <div class="calc-step calc-step--highlight">
                    <span class="step-label">Position size:</span>
                    <span class="step-value">50 √ó $50 = $2,500</span>
                  </div>
                </div>
                <div class="info-conclusion">üí° You never risk more than your preset % ‚Äî even if the trade fails.</div>
              </div>
            </div>
          </article>

          <article class="expander">
            <button type="button" id="scenariosButton" class="expander__trigger" aria-expanded="false">
              <span id="scenariosIcon" class="expander__icon">+</span>
              Risk Scenarios
            </button>
            <div id="scenariosContent" class="expander__content hidden" role="region" aria-expanded="false">
              <div class="scenarios">
                <div class="scenario-item">
                  <span class="scenario-risk">0.1% Risk</span>
                  <span class="scenario-details" id="scenario-0-1">-</span>
                </div>
                <div class="scenario-item">
                  <span class="scenario-risk">0.25% Risk</span>
                  <span class="scenario-details" id="scenario-0-25">-</span>
                </div>
                <div class="scenario-item">
                  <span class="scenario-risk">0.5% Risk</span>
                  <span class="scenario-details" id="scenario-0-5">-</span>
                </div>
                <div class="scenario-item">
                  <span class="scenario-risk">0.75% Risk</span>
                  <span class="scenario-details" id="scenario-0-75">-</span>
                </div>
                <div class="scenario-item">
                  <span class="scenario-risk">1% Risk</span>
                  <span class="scenario-details" id="scenario-1">-</span>
                </div>
              </div>
            </div>
          </article>
        </div>
      </section>

      <!-- JOURNAL SECTION (placeholder, keeps hook) -->
      <section class="section journal-section hidden">
        <article class="card card--peach">
          <header class="card__header">
            <h2 class="card__title">Trade Journal</h2>
            <span class="badge">Coming soon</span>
          </header>
          <p class="muted">Journal UI will appear here as we wire it up to your existing methods.</p>
        </article>
      </section>
    </main>

    <footer class="app-footer">
      <span>Made for momentum traders ¬∑ v2.0</span>
    </footer>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
